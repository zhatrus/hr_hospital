=========
Changelog
=========

Всі важливі зміни в проєкті hr_hospital будуть задокументовані в цьому файлі.

Формат базується на `Keep a Changelog <https://keepachangelog.com/uk/1.0.0/>`_,
і цей проєкт дотримується `Semantic Versioning <https://semver.org/spec/v2.0.0.html>`_.

[17.0.1.0.0] - 2024-12-25
=========================

Додано
------

**Моделі та функціонал**

* Абстрактна модель ``abstract.person`` з базовими полями особи
* Модель ``hr.hospital.doctor`` з підтримкою спеціалізацій та менторства
* Модель ``hr.hospital.patient`` з медичною інформацією та історією лікарів
* Модель ``hr.hospital.visit`` з різними статусами та типами візитів
* Модель ``hr.hospital.diagnosis`` з підтримкою затвердження
* Модель ``hr.hospital.disease`` з ієрархічною структурою
* Модель ``hr.hospital.doctor.specialization`` для класифікації лікарів
* Модель ``hr.hospital.doctor.schedule`` для графіків роботи
* Модель ``hr.hospital.patient.doctor.history`` для відстеження змін лікарів
* Модель ``hr.hospital.contact.person`` для контактних осіб пацієнтів

**Обчислювальні поля**

* ``age`` - автоматичний розрахунок віку від дати народження
* ``full_name`` - формування повного імені з ПІБ
* ``years_of_experience`` - розрахунок досвіду роботи лікаря
* ``disease_type_id`` - визначення типу хвороби з ієрархії
* ``is_current`` - визначення поточного призначення лікаря

**Візарди**

* ``mass.reassign.doctor.wizard`` - масове перепризначення лікарів
* ``reschedule.visit.wizard`` - перенесення візитів
* ``doctor.schedule.wizard`` - автоматичне заповнення розкладу
* ``disease.report.wizard`` - звіти по захворюваності
* ``patient.card.export.wizard`` - експорт медичних карток

**Валідація та обмеження**

* SQL constraint: унікальність ліцензійного номера лікаря
* SQL constraint: унікальність коду спеціалізації
* SQL constraint: рейтинг лікаря в межах 0.00-5.00
* Python constraint: заборона інтерна як ментора
* Python constraint: заборона рекурсивної ієрархії хвороб
* Python constraint: заборона видалення візитів з діагнозами
* Python constraint: валідація віку пацієнта
* Python constraint: валідація часу в розкладі

**Методи та бізнес-логіка**

* ``name_get`` для лікарів - відображення з спеціалізацією
* ``create`` для історії лікарів - деактивація попередніх записів
* ``write`` для пацієнтів - автоматичне створення історії при зміні лікаря
* ``unlink`` для візитів - перевірка наявності діагнозів
* ``action_approve`` для діагнозів - затвердження з фіксацією дати та лікаря
* ``action_unapprove`` для діагнозів - скасування затвердження
* ``action_view_visits`` для пацієнтів - перегляд візитів
* ``action_view_diagnoses`` для пацієнтів - перегляд діагнозів
* ``action_create_visit`` для пацієнтів - швидке створення візиту

**Представлення (Views)**

* Tree, Form, Search views для всіх основних моделей
* Kanban view для пацієнтів та лікарів
* Calendar view для візитів
* Pivot та Graph views для діагнозів
* Hierarchical view для хвороб
* Extended search views з фільтрами та групуванням

**Меню та навігація**

* Головне меню "Лікарня" з підменю
* Розділи: Пацієнти, Лікарі, Візити, Діагнози, Хвороби
* Конфігурація: Спеціалізації, Розклади
* Звіти: Захворюваність, Медичні картки

**Безпека**

* Група ``hospital_group_patient`` - доступ пацієнтів
* Група ``hospital_group_intern`` - доступ інтернів
* Група ``hospital_group_doctor`` - доступ лікарів
* Група ``hospital_group_manager`` - доступ менеджерів
* Група ``hospital_group_admin`` - адміністративний доступ
* Record rules для розмежування доступу до даних
* ACL (Access Control Lists) для всіх моделей

**Демо дані**

* 5 спеціалізацій лікарів (Cardiology, Neurology, Pediatrics, Surgery, Therapy)
* 8 лікарів, включаючи 2 інтернів з менторами
* 15 пацієнтів з різними медичними даними
* 6 контактних осіб
* 12 хвороб з ієрархічною структурою
* 25 візитів з різними статусами
* 20 діагнозів, включаючи незатверджені
* Розклади роботи для всіх лікарів
* Історія призначення персональних лікарів

**Локалізація**

* Повна українська локалізація (350+ перекладів)
* Переклад всіх полів, меню, повідомлень
* Переклад підказок та описів
* Переклад повідомлень про помилки

**Звіти**

* Pivot-таблиця захворюваності
* Графік захворюваності по типах хвороб
* Експорт медичних карток у JSON/CSV
* Друк карток пацієнтів та лікарів

**Тестування**

* 12+ юніт-тестів для основних методів
* Тести обчислювальних полів
* Тести валідації та обмежень
* Тести бізнес-логіки
* Покриття критичних методів моделей

**Документація**

* README.rst з детальним описом функціоналу
* Changelog.rst з історією змін
* Docstrings для всіх класів та методів
* HTML опис модуля в static/description/index.html
* Коментарі в коді для складних алгоритмів

Змінено
-------

* Оптимізовано структуру файлів моделей
* Покращено валідацію даних
* Оновлено представлення для кращої UX
* Виправлено помилки pylint та flake8

Виправлено
----------

* Дублікат перекладу "Diagnoses" у uk_UA.po
* Відсутній коментар модуля в uk_UA.po:1493
* Помилки синтаксису в PO-файлі
* Проблеми з валідацією часу в розкладі
* Помилки в доменах фільтрації

Безпека
-------

* Додано перевірку прав доступу на рівні record rules
* Захист від SQL-ін'єкцій через ORM
* Валідація вхідних даних у візардах
* Обмеження доступу до чутливих даних пацієнтів

[Unreleased]
============

Планується
----------

* Інтеграція з електронною медичною карткою
* API для мобільного додатку
* Нагадування про візити через SMS/Email
* Інтеграція з лабораторіями
* Онлайн-запис на прийом
* Телемедицина
* Інтеграція з аптеками
* Статистика та аналітика для адміністрації
* Фінансовий облік послуг
* Інтеграція з касовими апаратами

---

**Формат дат**: РРРР-ММ-ДД
**Типи змін**: Додано, Змінено, Застаріло, Видалено, Виправлено, Безпека
