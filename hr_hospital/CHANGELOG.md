# Changelog - HR Hospital Module

## Version 17.0.2.0.0 (Block 3 Enhancement)

### Нові можливості

#### 1. Абстрактна модель "Особа" (abstract.person)

Створено абстрактну модель `abstract.person`, яка містить спільні поля для всіх осіб (лікарів, пацієнтів тощо).

**Особливості:**
- Наслідування від `image.mixin` для підтримки аватарів
- Валідація телефону (міжнародний формат)
- Валідація email
- Автоматичне обчислення віку від дати народження
- Автоматичне формування повного імені з окремих полів

**Поля абстрактної моделі:**

**ПІБ (окремі поля):**
- `last_name` - Прізвище (обов'язкове)
- `first_name` - Ім'я (обов'язкове)
- `middle_name` - По батькові

**Контактна інформація:**
- `phone` - Телефон з валідацією формату
- `email` - Email з валідацією формату

**Особиста інформація:**
- `gender` - Стать (Selection: чоловік/жінка/інше)
- `date_of_birth` - Дата народження

**Обчислювальні поля:**
- `age` - Вік (обчислюється від дати народження)
- `full_name` - Повне ім'я (формується з ПІБ)

**Додаткова інформація:**
- `country_id` - Країна громадянства (Many2one до res.country)
- `lang_id` - Мова спілкування (Many2one до res.lang)

**Поля зображення (від image.mixin):**
- `image_1920`, `image_1024`, `image_512`, `image_256`, `image_128`

#### 2. Оновлення моделі Doctor (hr.hospital.doctor)

Модель `hr.hospital.doctor` тепер наслідує від `abstract.person`.

**Видалені поля (тепер успадковуються):**
- `name` → замінено на `last_name`, `first_name`, `middle_name`, `full_name`
- `phone` → успадковується від `abstract.person`
- `email` → успадковується від `abstract.person`

**Нові можливості:**
- Аватар лікаря
- Розділення ПІБ на окремі поля
- Стать та дата народження
- Автоматичне обчислення віку
- Країна громадянства та мова спілкування

#### 3. Оновлення моделі Patient (hr.hospital.patient)

Модель `hr.hospital.patient` тепер наслідує від `abstract.person`.

**Видалені поля (тепер успадковуються):**
- `name` → замінено на `last_name`, `first_name`, `middle_name`, `full_name`
- `phone` → успадковується від `abstract.person`
- `email` → успадковується від `abstract.person`
- `gender` → успадковується від `abstract.person`
- `date_of_birth` → успадковується від `abstract.person`
- `age` → успадковується від `abstract.person` (з покращеним алгоритмом обчислення)

**Нові можливості:**
- Аватар пацієнта
- Покращена валідація контактних даних
- Країна громадянства та мова спілкування

#### 4. Оновлення Views

**Doctor Form View:**
- Додано відображення аватара
- Реорганізовано поля у групи: "Personal Information", "Contact Information", "Professional Information"
- Повне ім'я відображається у заголовку форми

**Patient Form View:**
- Додано відображення аватара
- Реорганізовано поля у групи: "Personal Information", "Contact Information", "Medical Information"
- Повне ім'я відображається у заголовку форми

**Tree Views:**
- Замінено поле `name` на `full_name` у всіх списках

#### 5. Оновлення Demo даних

Оновлено демонстраційні дані для відповідності новій структурі:
- Розділено імена на окремі поля
- Додано дати народження для лікарів
- Додано стать для всіх осіб

### Технічні зміни

**Залежності:**
- Додано залежність від модуля `web` (для `image.mixin`)

**Валідація:**
- Телефон: міжнародний формат або (XXX) XXX-XXXX
- Email: стандартний формат email
- Дата народження: не може бути у майбутньому, вік не більше 150 років

**Обчислення віку:**
- Покращений алгоритм, який враховує місяць та день народження
- Автоматичне оновлення при зміні дати народження

### Міграція

При оновленні модуля потрібно:
1. Переконатися, що модуль `web` встановлений
2. Оновити базу даних: `odoo -u hr_hospital -d your_database`
3. Існуючі дані будуть потребувати ручного розділення поля `name` на `last_name`, `first_name`, `middle_name`

### Backwards Compatibility

**Breaking Changes:**
- Поле `name` більше не існує у моделях Doctor та Patient
- Використовуйте `full_name` для читання повного імені
- Використовуйте `last_name`, `first_name`, `middle_name` для запису

### Автор змін
Khatrus Zakhar

### Дата
2025-11-09
